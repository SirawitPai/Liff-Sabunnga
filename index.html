<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <title>LIFF Sabunnga</title>
    <link rel="stylesheet" href="css/style.css" media="all" />
  </head>
  <body class="bg">
    <!-- Start Container -->
    <!-- <div style="background-image: url('./img/bg.jpg');"></div> -->
    <img src="img/bg.jpg" alt="" width="100%" height="100%" />

    <div class="container">
      <!-- Start Header Content -->
      <div class="row">
        <div class="col s12 text-center">
          <h4>กรุณาเลือกหัวข้อในการแสดงรายการสินค้าดอกไม้</h4>
          <p>ในการเลือกบอทจะช่วยให้่สินค้าตรงตามที่ลูกค้าเลือกมากที่สุด</p>
        </div>
      </div>

      <div class="row">
        <form id="carForm" class="col s12">
          <div class="form-group">
            <!-- <label><h6>เลือกประเภทของการคัดสินค้าดอกไม้แต่ละหมวดหมู่</h6></label> -->
            <label for="email">หัวข้อการคัดสินค้าดอกไม้:</label>
            <select
              class="form-control"
              id="topic"
              name="sellist1"
              onchange="topictype()"
            >
              <option value="" disabled selected>
                กรุณาหัวข้อการคัดดอกไม้
              </option>
              <option value="รูปแบบการจัด">รูปแบบการจัด</option>
              <option value="สีดอกไม้">สีดอกไม้</option>
              <option value="ความหมายดอกไม้">ความหมายดอกไม้</option>
              <option value="วันสำคัญ">วันสำคัญ</option>
              <option value="ทั้งหมด">ทั้งหมด</option>
            </select>
            <select
              class="form-control"
              id="flowerarrangement"
              name="sellist2"
              style="display: none"
              onchange="topictype()"
            >
              <option value="" disabled selected>รูปแบบการจัดดอกไม้</option>
              <option value="ช่อดอกไม้">ช่อดอกไม้</option>
              <option value="แจกัน">แจกัน</option>
              <option value="พวงหลีด">พวงหลีด</option>
              <option value="ทั้งหมด">ทั้งหมด</option>
            </select>

            <select
              class="form-control"
              id="flowercolor"
              name="sellist3"
              style="display: none"
              onchange="topictype()"
            >
              <option value="" disabled selected>เลือกสีดอกไม้</option>
              <option value="สีขาว">สีขาว</option>
              <option value="สีแดง">สีแดง</option>
              <option value="สีเหลือง">สีเหลือง</option>
              <option value="สีชมพู">สีชมพู</option>
              <option value="ทั้งหมด">ทั้งหมด</option>
            </select>

            <select
              class="form-control"
              id="flowermeaning"
              name="sellist4"
              style="display: none"
              onchange="topictype()"
            >
              <option value="" disabled selected>เลือกความหมายดอกไม้</option>
              <option value="ความรัก">ความรัก</option>
              <option value="คำยินดี">คำยินดี</option>
              <option value="ความหวัง">ความหวัง</option>
              <option value="ทั้งหมด">ทั้งหมด</option>
            </select>
 
            <select
              class="form-control"
              id="bigday"
              name="sellist5"
              style="display: none"
              onchange="topictype()"
            >
              <option value="" disabled selected>เลือกวันสำคัญ</option>
              <option value="วันเกิด">วันเกิด</option>
              <option value="วันครบรอบ">วันครบรอบ</option>
              <option value="วันรับปริณญา">วันรับปริณญา</option>
              <option value="งานศพ">งานศพ</option>
              <option value="ทั้งหมด">ทั้งหมด</option>
            </select>

            <select
              class="form-control"
              id="bouquetsize"
              name="sellist6"
              style="display: none"
              onchange="topictype()"
            >
              <option value="" disabled selected>ขนาดช่อดอกไม้</option>
              <option value="เล็ก">เล็ก</option>
              <option value="กลาง">กลาง</option>
              <option value="ใหญ่">ใหญ่</option>
              <option value="ทั้งหมด">ทั้งหมด</option>
            </select>

            <select
              class="form-control"
              id="flowervase"
              name="sellist6"
              style="display: none"
              onchange="topictype()"
            >
              <option value="" disabled selected>รูปแบบแจกัน</option>
              <option value="รูปแบบการจัด">ยาว</option>
              <option value="สีดอกไม้">กลม</option>
              <option value="วันสำคัญ">ทั้งหมด</option>
            </select>

            <select
              class="form-control"
              id="wreathpattern"
              name="sellist6"
              style="display: none"
              onchange="topictype()"
            >
              <option value="" disabled selected>รูปแบบพวงหลีด</option>
              <option value="รูปแบบการจัด">กลม</option>
              <option value="สีดอกไม้">เหลี่ยม</option>
              <option value="วันสำคัญ">ทั้งหมด</option>
            </select>

            <select
              class="form-control"
              id="flowers"
              name="sellist6"
              style="display: none"
              onchange="topictype()"
            >
              <option value="" disabled selected>เลือกดอกไม้</option>
              <option value="กุหลาบ">กุหลาบ</option>
              <option value="ดอกคัตเตอร์">ดอกคัตเตอร์</option>
              <option value="ดอกคาร์เนชั่น">ดอกคาร์เนชั่น</option>
              <option value="ดอกทานตะวัน">ดอกทานตะวัน</option>
              <option value="ดอกทิวลิป">ดอกทิวลิป</option>
              <option value="ทั้งหมด">ทั้งหมด</option>
            </select>
            <br />

            <button
              type="button"
              class="btn btn-primary"
              onclick="sendProducts()"
            >
              คลิกส่งข้อมูลสินค้า
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="container-fluid">
      <p id="os"><b>OS:</b></p>
      <p id="language"><b>Language:</b></p>
      <p id="version"><b>Version:</b></p>
      <p id="isInClient"><b>isInClient:</b></p>
      <p id="accessToken"><b>AccessToken:</b></p>

      <img id="pictureUrl" />
      <p id="userId"><b>userId:</b></p>
      <p id="displayName"><b>displayName:</b></p>
      <p id="statusMessage"><b>statusMessage:</b></p>
      <p id="decodedIDToken"><b>email:</b></p>

      <p id="type"><b>type:</b></p>
      <p id="viewType"><b>viewType:</b></p>
      <p id="utouId"><b>utouId:</b></p>
      <p id="roomId"><b>roomId:</b></p>
      <p id="groupId"><b>groupId:</b></p>

      <p id="friendship"><b>isFriendship:</b></p>
      <p id="scanCode"><b>Code:</b></p>
      <p id="isLoggedIn"><b>isLoggedIn:</b></p>

      <p id="universalLink1"><b>Universal Link:</b></p>
      <p id="universalLink2"><b>Universal Link with Query params:</b></p>
      <p>
        <a href="https://sirawitpai.github.io/Liff-Sabunnga/path/?param=1"
          >Link to Path</a
        >
      </p>
      <button id="btnMsg1" onclick="sendProducts()">รายการสินค้า</button>
      <button id="btnMsg" onclick="sendMsg()">Send Message</button>
      <button id="btnShare" onclick="shareMsg()">Share Target Picker</button>
      <button onclick="openWindow()">Open Window</button>
      <button id="btnScanCode" onclick="scanCode()">Scan Code</button>
      <button id="btnLogOut" onclick="logOut()">Log Out</button>
      <button id="btnClose" onclick="Closed()">Close</button>
    </div>
    <script src="js/vconsole.min.js"></script>
    <script>
      var vConsole = new VConsole();
      console.log("Hello World!");
    </script>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

    <script>
      async function topictype() {
        const topice = document.getElementById("topic").value;
        if (topice == "รูปแบบการจัด") {
          document.getElementById("flowerarrangement").style.display = "block";

          document.getElementById("flowercolor").style.display = "none";
          document.getElementById("flowermeaning").style.display = "none";
          document.getElementById("bigday").style.display = "none";

          var flowerarrangement =
            document.getElementById("flowerarrangement").value;

          if (flowerarrangement == "ช่อดอกไม้") {
            document.getElementById("bouquetsize").style.display = "block";
            var bouquetsize = document.getElementById("bouquetsize").value;

            if (bouquetsize == "" || bouquetsize == "ทั้งหมด") {
              document.getElementById("flowers").style.display = "none";
            } else {
              document.getElementById("flowers").style.display = "block";
            }

            document.getElementById("flowervase").style.display = "none";
            document.getElementById("wreathpattern").style.display = "none";
          } else if (flowerarrangement == "แจกัน") {
            document.getElementById("flowervase").style.display = "block";

            document.getElementById("wreathpattern").style.display = "none";
            document.getElementById("bouquetsize").style.display = "none";
          } else if (flowerarrangement == "พวงหลีด") {
            document.getElementById("wreathpattern").style.display = "block";

            document.getElementById("flowervase").style.display = "none";
            document.getElementById("bouquetsize").style.display = "none";
          } else {
            document.getElementById("wreathpattern").style.display = "none";
            document.getElementById("flowervase").style.display = "none";
            document.getElementById("bouquetsize").style.display = "none";
          }
        } else if (topice == "สีดอกไม้") {
          document.getElementById("flowercolor").style.display = "block";

          document.getElementById("flowerarrangement").style.display = "none";
          document.getElementById("flowermeaning").style.display = "none";
          document.getElementById("bigday").style.display = "none";
          document.getElementById("bouquetsize").style.display = "none";
          document.getElementById("flowervase").style.display = "none";
          document.getElementById("wreathpattern").style.display = "none";
          document.getElementById("flowers").style.display = "none";
        } else if (topice == "ความหมายดอกไม้") {
          document.getElementById("flowermeaning").style.display = "block";

          document.getElementById("flowerarrangement").style.display = "none";
          document.getElementById("flowercolor").style.display = "none";
          document.getElementById("bigday").style.display = "none";
          document.getElementById("bouquetsize").style.display = "none";
          document.getElementById("flowervase").style.display = "none";
          document.getElementById("wreathpattern").style.display = "none";
          document.getElementById("flowers").style.display = "none";
        } else if (topice == "วันสำคัญ") {
          document.getElementById("bigday").style.display = "block";

          document.getElementById("flowerarrangement").style.display = "none";
          document.getElementById("flowercolor").style.display = "none";
          document.getElementById("flowermeaning").style.display = "none";
          document.getElementById("bouquetsize").style.display = "none";
          document.getElementById("flowervase").style.display = "none";
          document.getElementById("wreathpattern").style.display = "none";
          document.getElementById("flowers").style.display = "none";
        } else {
          document.getElementById("flowerarrangement").style.display = "none";
          document.getElementById("flowercolor").style.display = "none";
          document.getElementById("flowermeaning").style.display = "none";
          document.getElementById("bigday").style.display = "none";
          document.getElementById("bouquetsize").style.display = "none";
          document.getElementById("flowervase").style.display = "none";
          document.getElementById("wreathpattern").style.display = "none";
          document.getElementById("flowers").style.display = "none";
        }
      }
      async function sendProducts() {
        if (
          liff.getContext().type !== "none" &&
          liff.getContext().type !== "external"
        ) {
          await liff.sendMessages([
            {
              type: "text",
              text: "รายการสินค้าตามที่เลือกของ LIFF มีดังนี้ค่ะ",
            },
            {
              type: "template",
              altText: "this is an image carousel template",
              template: {
                type: "image_carousel",
                columns: [
                  {
                    imageUrl:
                      "https://cdn.pixabay.com/photo/2016/11/22/22/20/rose-1850903_960_720.jpg",
                    action: {
                      type: "message",
                      label: "L11",
                      text: "L11",
                    },
                  },
                  {
                    imageUrl:
                      "https://www.teahub.io/photos/full/129-1292320_floribunda.jpg",
                    action: {
                      type: "message",
                      label: "L12",
                      text: "L12",
                    },
                  },
                ],
              },
            },
          ]);
          alert("รายการสินค้าส่งไปในห้องแชทแล้วค่ะ ");
        }
        liff.closeWindow();
      }

      function createUniversalLink() {
        const link1 = liff.permanentLink.createUrl();
        document.getElementById("universalLink1").append(link1);

        liff.permanentLink.setExtraQueryParam("param=9");
        const link2 = liff.permanentLink.createUrl();
        document.getElementById("universalLink2").append(link2);
      }

      async function shareMsg() {
        await liff.shareTargetPicker([
          {
            type: "text",
            text: "This message waas sent by ShareTargetPicker",
          },
        ]);
        liff.closeWindow();
      }

      function logOut() {
        liff.logout();
        window.location.reload();
      }

      function Closed() {
        liff.closeWindow();
      }

      async function scanCode() {
        const result = await liff.scanCode();
        document.getElementById("scanCode").append(result.value);
      }

      function openWindow() {
        liff.openWindow({
          url: "https://line.me",
          external: true,
        });
      }

      async function getFriendship() {
        const friend = await liff.getFriendship();
        document.getElementById("friendship").append(friend.friendFlag);
        if (!friend.friendFlag) {
          if (confirm("คุณยังไม่ได้เพิ่ม Bot เป็นเพื่อน จะเพิ่มเลยไหม ?")) {
            window.location = "https://line.me/R/ti/p/Q178yfyoa";
          }
        }
      }

      async function sendMsg() {
        if (
          liff.getContext().type !== "none" &&
          liff.getContext().type !== "external"
        ) {
          await liff.sendMessages([
            {
              type: "text",
              text: "สวัสดีครับการแชร์ข้อความ",
            },
            {
  "type": "image",
  "originalContentUrl": "https://www.emporium.co.th/wp-content/uploads/2020/02/20200204-Web-Cover-01-1.jpg",
  "previewImageUrl": "https://www.emporium.co.th/wp-content/uploads/2020/02/20200204-Web-Cover-01-1.jpg"
},
          ]);
          alert("Message Sent");
        }
        liff.closeWindow();
      }

      function getContext() {
        document.getElementById("type").append(liff.getContext().type);
        document.getElementById("viewType").append(liff.getContext().viewType);
        document.getElementById("utouId").append(liff.getContext().utouId);
        document.getElementById("roomId").append(liff.getContext().roomId);
        document.getElementById("groupId").append(liff.getContext().groupId);
      }

      async function getUserProfile() {
        const profile = await liff.getProfile();
        document.getElementById("pictureUrl").src = profile.pictureUrl;
        document.getElementById("userId").append(profile.userId);
        document.getElementById("statusMessage").append(profile.statusMessage);
        document.getElementById("displayName").append(profile.displayName);

        document
          .getElementById("decodedIDToken")
          .append(liff.getDecodedIDToken().email);
      }

      function getEnvironment() {
        document.getElementById("os").append(liff.getOS());
        document.getElementById("language").append(liff.getLanguage());
        document.getElementById("version").append(liff.getVersion());
        document.getElementById("accessToken").append(liff.getAccessToken());
        document.getElementById("isInClient").append(liff.isInClient());
        if (liff.isInClient()) {
          document.getElementById("btnLogOut").style.display = "none";
        } else {
          document.getElementById("btnMsg").style.display = "none";
          document.getElementById("btnScanCode").style.display = "none";
          document.getElementById("btnClose").style.display = "none";
        }
      }

      async function main() {
        liff.ready.then(() => {
          document.getElementById("isLoggedIn").append(liff.isLoggedIn());
          if (liff.isLoggedIn()) {
            getEnvironment();
            getUserProfile();
            getContext();
            getFriendship();
            createUniversalLink();
          } else {
            liff.login();
          }
        });
        await liff.init({ liffId: "1656033600-Bwm23aQn" });
      }
      main();
    </script>
  </body>
</html>
